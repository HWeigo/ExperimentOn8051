A51 MACRO ASSEMBLER  EXPERIMENT_3WITHCOMMENTS                                             04/20/2019 21:13:32 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN .\experiment_3withComments.obj
ASSEMBLER INVOKED BY: D:\Microcontrollers\Keil\C51\BIN\A51.EXE ..\Experiment3\experiment_3withComments.asm SET(SMALL) DE
                      BUG PRINT(.\experiment_3withComments.lst) OBJECT(.\experiment_3withComments.obj) EP

LOC  OBJ            LINE     SOURCE

  0030                 1                         SECOND_LOW EQU 30H
  0031                 2                             SECOND_HIGH EQU 31H
  0032                 3                             MINUTE_LOW EQU 32H
  0033                 4                             MINUTE_HIGH EQU 33H
  0034                 5                             TCOUNT EQU 34H
                       6                             
0000                   7                             ORG 0H
0000 0160              8                             AJMP MAIN
0003                   9                             ORG 0003H
0003 2110             10                             AJMP INTF
000B                  11                             ORG 000BH
000B 212B             12                             AJMP TINT0
0013                  13                             ORG 0013H
0013 211B             14                             AJMP INTS
                      15     
0060                  16                             ORG 60H
                      17     
0060                  18     MAIN:           ;≥ı ºªØ
0060 753000           19                             MOV SECOND_LOW,#0H
0063 753100           20                             MOV SECOND_HIGH,#0H
0066 753200           21                             MOV MINUTE_LOW,#0H
0069 753300           22                             MOV MINUTE_HIGH,#0H
006C 753400           23                             MOV TCOUNT,#0H
006F 7900             24                             MOV R1,#0H              ;R1◊˜Œ™‘›Õ£”√flag
                      25                             
0071 D2AF             26                             SETB EA                 ;CPU‘ –Ì÷–∂œ
                      27                             
                      28                             ;Õ‚≤ø÷–∂œ≥ı ºªØ
0073 C288             29                             CLR IT0                 ;…Ë÷√Õ‚≤ø÷–∂œ¥•∑¢∑Ω Ω
0075 C28A             30                             CLR IT1
0077 D2B8             31                             SETB PX0                ;…Ë÷√INT0∏ﬂ”≈œ»º∂
0079 C2BA             32                             CLR PX1                 ;…Ë÷√INT1∏ﬂ”≈œ»º∂
007B D2A8             33                             SETB EX0                ;ø™∑≈÷–∂œ
007D D2AA             34                             SETB EX1
                      35                     
                      36     
                      37                             ;∂® ±∆˜÷–∂œ≥ı ºªØ
007F 758901           38                             MOV TMOD,#01H   ;t0 π”√ƒ£ Ω1∂® ±∆˜
0082 758C4C           39                             MOV TH0,#4CH    ;…Ë÷√∂® ±50ms
0085 758A00           40                             MOV TL0,#0H
0088 D2A9             41                             SETB ET0                ;t1‘ –Ì÷–∂œ                                
                                           
008A D28C             42                             SETB TR0                ;∆Ù∂Ø∂® ±                                  
                                           
                      43     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                   
                      44     
008C 2164             45     LOOP:           AJMP DISPLAY
008E 80FC             46                             SJMP LOOP
                      47     
                      48     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      49     ;Õ‚≤ø÷–∂œINT0”√”⁄«–ªªR1£®◊¥Ã¨ª˙£¨”√◊˜‘›Õ£flag£©
                      50     ;R1-0‘À––£¨R1-1‘›Õ£
0110                  51                             ORG 0110H
0110 09               52     INTF:           INC R1
0111 D2A9             53                             SETB ET0                
0113 B90202           54                             CJNE R1,#2H,NEXT_INT
0116 7900             55                             MOV R1,#0H
A51 MACRO ASSEMBLER  EXPERIMENT_3WITHCOMMENTS                                             04/20/2019 21:13:32 PAGE     2

0118                  56     NEXT_INT:
0118 C2A9             57                             CLR ET0
011A 32               58                             RETI
                      59     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      60     ;Õ‚≤ø÷–∂œINT1”√”⁄«Â¡„
011B 753000           61     INTS:           MOV SECOND_LOW,#0H        ;÷ÿ÷√À˘”–ºƒ¥Ê∆˜
011E 753100           62                             MOV SECOND_HIGH,#0H
0121 753200           63                             MOV MINUTE_LOW,#0H
0124 753300           64                             MOV MINUTE_HIGH,#0H
0127 753400           65                             MOV TCOUNT,#0H
                      66                             
012A 32               67                             RETI
                      68     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      69     ;∂® ±∆˜÷–∂œ
012B 758C4C           70     TINT0:          MOV TH0,#4CH            ;÷ÿ÷√≥ı÷µ
012E 758A00           71                             MOV TL0,#0H
                      72     
0131 0534             73                             INC TCOUNT
0133 E534             74                             MOV A,TCOUNT
0135 B4142B           75                             CJNE A,#20,NEXT_TINT    ;50msº∆ Œ™¥Ô20¥Œ£¨Ã¯≥ˆ
0138 753400           76                             MOV TCOUNT,#0H                  ;÷ÿ÷√50msº∆ ∆˜TCOUNT
013B 0530             77                             INC SECOND_LOW                  ;√Î∏ˆŒª º”1
013D E530             78                             MOV A,SECOND_LOW
013F B40A21           79                             CJNE A,#10,NEXT_TINT    ;√Î∏ˆŒªŒ¥µΩ10£¨Ã¯≥ˆ
0142 753000           80                             MOV SECOND_LOW,#0H              ;÷ÿ÷√√Î∏ˆŒª
0145 0531             81                             INC SECOND_HIGH                 ;√Î ÆŒªº”1
0147 E531             82                             MOV A,SECOND_HIGH
0149 B40617           83                             CJNE A,#6,NEXT_TINT             ;√Î ÆŒªŒ¥µΩ6£¨Ã¯≥ˆ
014C 753100           84                             MOV SECOND_HIGH,#0H             ;÷ÿ÷√√Î ÆŒª
014F 0532             85                             INC MINUTE_LOW                  ;∑÷∏ˆŒªº”1
0151 E532             86                             MOV A,MINUTE_LOW
0153 B40A0D           87                             CJNE A,#10,NEXT_TINT    ;∑÷∏ˆŒªŒ¥µΩ10£¨Ã¯≥ˆ
0156 753200           88                             MOV MINUTE_LOW,#0H              ;÷ÿ÷√∑÷∏ˆŒª
0159 0533             89                             INC MINUTE_HIGH                 ;∑÷ ÆŒªº”1
015B E533             90                             MOV A,MINUTE_HIGH
015D B40603           91                             CJNE A,#6,NEXT_TINT     ;∑÷ ÆŒªŒ¥µΩ6£¨Ã¯≥ˆ
0160 753300           92                             MOV MINUTE_HIGH,#0H             ;÷ÿ÷√∑÷∏ˆŒª
                      93     
0163                  94     NEXT_TINT:
0163 32               95                             RETI
                      96     
                      97     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      98     ; ¬Îπ‹œ‘ æ
0164                  99     DISPLAY:        ;µ⁄“ª∏ˆ ¬Îπ‹
0164 9001A7          100                             MOV     DPTR,#DSEG1
0167 E533            101                             MOV  A,MINUTE_HIGH
0169 93              102                             MOVC    A,@A+DPTR
016A 907FF0          103                             MOV     DPTR,#7FF0H                          
016D F0              104                             MOVX    @DPTR,A
                     105                             
016E 3195            106                             ACALL DELAY_SHORT
                     107     
                     108                             ;µ⁄∂˛∏ˆ ¬Îπ‹
0170 9001A7          109                             MOV     DPTR,#DSEG1
0173 E532            110                             MOV A,MINUTE_LOW
0175 93              111                             MOVC    A,@A+DPTR
0176 907FF1          112                             MOV     DPTR,#7FF1H                          
0179 F0              113                             MOVX    @DPTR,A
                     114     
017A 3195            115                             ACALL DELAY_SHORT
                     116     
                     117                             ;µ⁄»∏ˆ ¬Îπ‹
017C 9001A7          118                             MOV     DPTR,#DSEG1
017F E531            119                             MOV A,SECOND_HIGH
0181 93              120                             MOVC    A,@A+DPTR
0182 907FF2          121                             MOV     DPTR,#7FF2H                          
A51 MACRO ASSEMBLER  EXPERIMENT_3WITHCOMMENTS                                             04/20/2019 21:13:32 PAGE     3

0185 F0              122                             MOVX    @DPTR,A
                     123     
0186 3195            124                             ACALL DELAY_SHORT
                     125     
                     126                             ;µ⁄Àƒ∏ˆ ¬Îπ‹
0188 9001A7          127                             MOV     DPTR,#DSEG1
018B E530            128                             MOV A,SECOND_LOW
018D 93              129                             MOVC    A,@A+DPTR
018E 907FF3          130                             MOV     DPTR,#7FF3H                          
0191 F0              131                             MOVX    @DPTR,A
                     132     
0192 3195            133                             ACALL DELAY_SHORT
                     134     
0194 22              135                             RET
                     136     
0195                 137     DELAY_SHORT:                   
0195 7F0A            138                MOV R7,#10
0197 7EFA            139     DEL_SHORT: MOV R6,#250
0199 DEFE            140                DJNZ R6,$
019B DFFA            141                DJNZ R7,DEL_SHORT
019D 22              142                RET
                     143     
019E                 144     DELAY_LONG:                   
019E 7F64            145                MOV R7,#100
01A0 7EFA            146     DEL_LONG:  MOV R6,#250
01A2 DEFE            147                DJNZ R6,$
01A4 DFFA            148                DJNZ R7,DEL_LONG
01A6 22              149                RET
                     150     
01A7 C0F9A4B0        151     DSEG1:    DB 0C0H,0F9H,0A4H,0B0H                        
01AB 999282F8        152               DB 99H,92H,82H,0F8H
01AF 80908883        153               DB 80H,90H,88H,83H
01B3 C6A1868E        154               DB 0C6H,0A1H,86H,8EH
                     155     
                     156               END                  
A51 MACRO ASSEMBLER  EXPERIMENT_3WITHCOMMENTS                                             04/20/2019 21:13:32 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

DELAY_LONG . . . .  C ADDR   019EH   A   
DELAY_SHORT. . . .  C ADDR   0195H   A   
DEL_LONG . . . . .  C ADDR   01A0H   A   
DEL_SHORT. . . . .  C ADDR   0197H   A   
DISPLAY. . . . . .  C ADDR   0164H   A   
DSEG1. . . . . . .  C ADDR   01A7H   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
ET0. . . . . . . .  B ADDR   00A8H.1 A   
EX0. . . . . . . .  B ADDR   00A8H.0 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
INTF . . . . . . .  C ADDR   0110H   A   
INTS . . . . . . .  C ADDR   011BH   A   
IT0. . . . . . . .  B ADDR   0088H.0 A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
LOOP . . . . . . .  C ADDR   008CH   A   
MAIN . . . . . . .  C ADDR   0060H   A   
MINUTE_HIGH. . . .  N NUMB   0033H   A   
MINUTE_LOW . . . .  N NUMB   0032H   A   
NEXT_INT . . . . .  C ADDR   0118H   A   
NEXT_TINT. . . . .  C ADDR   0163H   A   
PX0. . . . . . . .  B ADDR   00B8H.0 A   
PX1. . . . . . . .  B ADDR   00B8H.2 A   
SECOND_HIGH. . . .  N NUMB   0031H   A   
SECOND_LOW . . . .  N NUMB   0030H   A   
TCOUNT . . . . . .  N NUMB   0034H   A   
TH0. . . . . . . .  D ADDR   008CH   A   
TINT0. . . . . . .  C ADDR   012BH   A   
TL0. . . . . . . .  D ADDR   008AH   A   
TMOD . . . . . . .  D ADDR   0089H   A   
TR0. . . . . . . .  B ADDR   0088H.4 A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
