A51 MACRO ASSEMBLER  EXPERIMENT_5HW                                                       04/26/2019 12:31:06 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN .\Experiment_5hw.obj
ASSEMBLER INVOKED BY: D:\Microcontrollers\Keil\C51\BIN\A51.EXE ..\Experiment5\Experiment_5hw.asm SET(SMALL) DEBUG PRINT(
                      .\Experiment_5hw.lst) OBJECT(.\Experiment_5hw.obj) EP

LOC  OBJ            LINE     SOURCE

  003A                 1                               PROTECTION EQU 3AH
                       2     
0000                   3                               ORG 0000H
0000 020060            4                               LJMP BEGIN
0013                   5                               ORG 0013H          ;Íâ²¿ÖÐ¶Ï1µÄÈë¿Ú
0013 0200BF            6                               LJMP INTT1     ;µ÷µ½Íâ²¿ÖÐ¶Ï
0060                   7                               ORG 0060H     
                       8     
                       9     
0060                  10     BEGIN:
0060 D2AF             11                                     SETB EA     ;×ÜÖÐ¶Ï¿ª¹Ø´ò¿ª
0062 D2AA             12                                     SETB EX1            ;Íâ²¿ÖÐ¶Ï1ÔÊÐíÆôÓÃ
0064 D28A             13                                     SETB IT1            ;¿ªÆôÍâÖÐ¶Ï1,¼ì²é¶Ë¿ÚÊÇ·ñÓÐÖÐ¶ÏÐÅºÅ
0066 758170           14                                     MOV SP,#70H     ;¶ÑÕ»Ö¸ÕëÉèÖÃ
0069 90DFFA           15                                     MOV DPTR,#0DFFAH ;Æô¶¯AD×ª»»£¬Ö®ºóµÈ´ADÄ£¿é×ª»»½áÊø£¬·¢³öÖÐ
                             ¶ÏÇëÇó
006C F0               16                                     MOVX @DPTR,A       ;Æô¶¯AD×ª»»£¬Ö®ºóµÈ´ADÄ£¿é×ª»»½áÊø£¬·¢³ö
                             ÖÐ¶ÏÇëÇó
006D C296             17                                     CLR P1.6
006F                  18     MAIN: 
                      19     
006F 1200CE           20     LOOP:                   LCALL BCD         ;ÏÔÊ¾Éè¶¨Öµ£¬Í¬Ê±½«Éè¶¨Öµ×ªÎªÊ®Áù½øÖÆ´æÔÚR2ÖÐ
0072 1200E6           21                                     LCALL TEMTRANS    ;²É¼¯Ê¾ÝµÄÊ®Áù½øÖÆ×ª»»
0075 12010A           22                                     LCALL DISPLAY     ;ÏÔÊ¾³ÌÐò
                      23     
                      24                                     ;CPL P1.6               ;¿´ÃÅ¹·Âö³å
                      25     
0078 C3               26                                     CLR C
0079 EF               27                                     MOV A,R7                  ;R7Êµ¼ÊË®ÎÂ
007A 8A50             28                                     MOV 50H,R2        ;R2Éè¶¨Ë®ÎÂ
007C B55000           29                                     CJNE A,50H,COMPARE1       ;Êµ¼ÊË®ÎÂ>Éè¶¨Ë®ÎÂ,CY=0,Êµ¼ÊË®ÎÂ<
                             Éè¶¨Ë®ÎÂ,CY=1
                      30     
007F 30D71E           31     COMPARE1:               JNB CY,STOP
                      32     
0082 EA               33                                     MOV A,R2
0083 9405             34                                     SUBB A,#5H                ;ÉèÖÃÎÂ¶È¼õ5
0085 C3               35                                     CLR C                     ;Çå¿Õ±êÖ¾Î»
0086 EF               36                                     MOV A,R7                  ;Êµ¼ÊÎÂ¶È
0087 F551             37                                     MOV 51H,A                 ;Éè¶¨ÎÂ¶È-5
0089 B55100           38                                     CJNE A,51H,COMPARE2               ;Êµ¼ÊÎÂ¶È>Éè¶¨ÎÂ¶È£¨»º³åÇ
                             øÄÚ£©,CY=0
                      39     
008C 30D706           40     COMPARE2:               JNB CY,FLASH
                      41                                     
008F 1200A9           42                                     LCALL TURNON
0092 02006F           43                                     LJMP LOOP
                      44     
                      45     
0095 1200A9           46     FLASH:                  LCALL TURNON
0098 3101             47                                     ACALL DELAY_LONG
009A 1200B4           48                                     LCALL TURNOFF
009D 02006F           49                                     LJMP LOOP
                      50                                     
                      51     
00A0 1200B4           52     STOP:                   LCALL TURNOFF    ;¹Ø±Õ¼ÌµçÆ÷
00A3 02006F           53                                     LJMP LOOP                ;Ìø»ØLOOP
A51 MACRO ASSEMBLER  EXPERIMENT_5HW                                                       04/26/2019 12:31:06 PAGE     2

                      54     
00A6 80C7             55                                     SJMP LOOP
00A8 22               56                                     RET
                      57     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      58     ;¿ª¼ÌµçÆ÷£¨Ê¹ÓÃ LCALL TURNON£©
00A9 7C0F             59     TURNON:                 MOV R4,#0FH
00AB EC               60                                     MOV A,R4
00AC 907FFC           61                                     MOV DPTR,#7FFCH
00AF F0               62                                     MOVX @DPTR,A
00B0 120101           63                                     LCALL DELAY_LONG
00B3 22               64                                     RET
                      65     
                      66     ;¹Ø¼ÌµçÆ÷£¨Ê¹ÓÃ LCALL TURNOFF£©
00B4 7C00             67     TURNOFF:                MOV R4,#0H
00B6 EC               68                                     MOV A,R4
00B7 907FFC           69                                     MOV DPTR,#7FFCH
00BA F0               70                                     MOVX @DPTR,A
00BB 120101           71                                     LCALL DELAY_LONG
00BE 22               72                                     RET
                      73     
                      74     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00BF                  75     INTT1:
00BF C2AA             76                               CLR EX1
00C1 F53A             77                               MOV PROTECTION,A  ;±£´æÔ­À´µÄÀÛ¼ÓÆ÷
00C3 90DFFA           78                               MOV DPTR,#0DFFAH      ;¶Á×ª»»Öµ
00C6 E0               79                               MOVX A,@DPTR          ;¶Á×ª»»Öµ
00C7 FB               80                               MOV R3,A                      ;¶ÁÊ´¢´æÖÁR3
00C8 F0               81                               MOVX @DPTR,A          ;Æô¶¯AD×ª»»
00C9 E53A             82                               MOV A,PROTECTION      ;»Ö¸´
00CB D2AA             83                               SETB EX1
00CD 32               84                               RETI                          ;·µ»Ø¶Ïµã
                      85     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00CE                  86     BCD:
00CE C297             87                               CLR P1.7                 ;Ñ¡Ôñ²¦ÂëÅÌÇ°Á½Î»
00D0 90BFFF           88                               MOV DPTR,#0BFFFH
00D3 E0               89                               MOVX A,@DPTR     ;¶Á³ö²¦ÂëÅÌ8Î»¶þ½øÖÆÊ
00D4 F4               90                               CPL A                    ;È¡·´
00D5 75F010           91                               MOV B,#10H       ;·ÖÀëÇ°ËÄÎ»ºÍºóËÄÎ»
00D8 84               92                               DIV AB                   ;·ÖÀëÇ°ËÄÎ»ºÍºóËÄÎ»
00D9 85F032           93                               MOV 32H,B                ;Éè¶¨ÎÂ¶ÈÖµµÃ¸öÎ»´æÈëÊÂë¹Ü3
00DC F533             94                               MOV 33H,A                ;Éè¶¨ÎÂ¶ÈÖµµÃÊ®Î»´æÈëÊÂë¹Ü4
00DE 75F00A           95                               MOV B,#0AH       ;¸³ÓèBÎª10
00E1 A4               96                               MUL AB                   ;Ê®Î»Ê³Ë10µÃµ½ÆäÊ®Áù½øÖÆ±í´ï
00E2 2532             97                               ADD A,32H                ;¼ÓÉÏ¸öÎ»Ê
00E4 FA               98                               MOV R2,A                 ;Éè¶¨Öµ³É¼´×ª»»ÎªÊ®Áù½øÖÆ
00E5 22               99                             RET
                     100     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00E6                 101     TEMTRANS:                ;²É¼¯µ½ÎÂ¶ÈÖµµÄÊ®½øÖÆ×ª»»
00E6 EB              102                               MOV A,R3        
00E7 75F064          103                               MOV B,#100     ;²É¼¯µ½µÄ8Î»¶þ½øÖÆÊÏÈ³ËÒÔ100£¬ÔÙ³ÒÔ256¾ÍÊÇ²É¼¯µ½µÄ
                             Ë®ÎÂ
00EA A4              104                               MUL AB         
00EB AFF0            105                               MOV R7,B           ;³Ë»µÄ¸ß°ËÎ»»á½øÈëB£¬µÍ°ËÎ»½øÈëA£¬Õâ¸öÊ³ÒÔ256£
                             ¬Ïàµ±ÓÚÕâ¸öÊÍùÓÒ±ßÒÆ¶¯°ËÎ»£¬ËùÒÔB¾ÍÊÇË®µÄÎÂ¶ÈÖµ
00ED EF              106                               MOV A,R7           ;·ÖÀëË®ÎÂµÄÇ°ºóËÄÎ»£¨ÏÖÔÚµÄË®ÎÂÊÇÊ®Áù½øÖÆµÄ£¬º
                             óËÄÎ»µÄÖµ²»»á³¬¹15£©
00EE 75F00A          107                               MOV B,#0AH  
00F1 84              108                               DIV AB           
00F2 F531            109                               MOV 31H,A              ;Ê®Î»·Åµ½ÊÂë¹Ü2
00F4 85F030          110                               MOV 30H,B              ;¸öÎ»·Åµ½ÊÂë¹Ü1
00F7 22              111                               RET                    ;×Ó³ÌÐò·µØ
                     112     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     113     
00F8                 114     DELAY_SHORT:                   
00F8 7F0A            115                MOV R7,#10
00FA 7EFA            116     DEL_SHORT: MOV R6,#250
A51 MACRO ASSEMBLER  EXPERIMENT_5HW                                                       04/26/2019 12:31:06 PAGE     3

00FC DEFE            117                DJNZ R6,$
00FE DFFA            118                DJNZ R7,DEL_SHORT
0100 22              119                RET
                     120     
0101                 121     DELAY_LONG:                   
0101 7F64            122                MOV R7,#100
0103 7EFA            123     DEL_LONG:  MOV R6,#250
0105 DEFE            124                DJNZ R6,$
0107 DFFA            125                DJNZ R7,DEL_LONG
0109 22              126                RET
                     127     
                     128     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
010A                 129     DISPLAY:           ;ÏÔÊ¾º¯Ê
010A E530            130                               MOV A,30H
010C 540F            131                               ANL A,#0FH
010E 90013B          132                               MOV DPTR,#DSEG1
0111 93              133                               MOVC A,@A+DPTR
0112 907FF8          134                               MOV DPTR,#7FF8H
0115 F0              135                               MOVX @DPTR,A
                     136                             
0116 E531            137                               MOV A,31H
0118 540F            138                               ANL A,#0FH
011A 90013B          139                               MOV DPTR,#DSEG1
011D 93              140                               MOVC A,@A+DPTR
011E 907FF9          141                               MOV DPTR,#7FF9H
0121 F0              142                               MOVX @DPTR,A
                     143                             
0122 E532            144                               MOV A,32H
0124 540F            145                               ANL A,#0FH
0126 90013B          146                               MOV DPTR,#DSEG1
0129 93              147                               MOVC A,@A+DPTR
012A 907FFA          148                               MOV DPTR,#7FFAH
012D F0              149                               MOVX @DPTR,A
                     150                             
012E E533            151                               MOV A,33H
0130 540F            152                               ANL A,#0FH
0132 90013B          153                               MOV DPTR,#DSEG1
0135 93              154                               MOVC A,@A+DPTR
0136 907FFB          155                               MOV DPTR,#7FFBH
0139 F0              156                               MOVX @DPTR,A
013A 22              157                               RET
013B                 158     DSEG1:                            ;¶ÎÂë±í
013B C0F9A4B0        159                                     DB 0C0H,0F9H,0A4H,0B0H
013F 999282F8        160                                     DB 99H,92H,82H,0F8H
0143 80908883        161                                     DB 80H,90H,88H,83H
0147 C6A1868E        162                                     DB 0C6H,0A1H,86H,8EH
                     163                                       
                     164                                       END
A51 MACRO ASSEMBLER  EXPERIMENT_5HW                                                       04/26/2019 12:31:06 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

B. . . . . . . . .  D ADDR   00F0H   A   
BCD. . . . . . . .  C ADDR   00CEH   A   
BEGIN. . . . . . .  C ADDR   0060H   A   
COMPARE1 . . . . .  C ADDR   007FH   A   
COMPARE2 . . . . .  C ADDR   008CH   A   
CY . . . . . . . .  B ADDR   00D0H.7 A   
DELAY_LONG . . . .  C ADDR   0101H   A   
DELAY_SHORT. . . .  C ADDR   00F8H   A   
DEL_LONG . . . . .  C ADDR   0103H   A   
DEL_SHORT. . . . .  C ADDR   00FAH   A   
DISPLAY. . . . . .  C ADDR   010AH   A   
DSEG1. . . . . . .  C ADDR   013BH   A   
EA . . . . . . . .  B ADDR   00A8H.7 A   
EX1. . . . . . . .  B ADDR   00A8H.2 A   
FLASH. . . . . . .  C ADDR   0095H   A   
INTT1. . . . . . .  C ADDR   00BFH   A   
IT1. . . . . . . .  B ADDR   0088H.2 A   
LOOP . . . . . . .  C ADDR   006FH   A   
MAIN . . . . . . .  C ADDR   006FH   A   
P1 . . . . . . . .  D ADDR   0090H   A   
PROTECTION . . . .  N NUMB   003AH   A   
SP . . . . . . . .  D ADDR   0081H   A   
STOP . . . . . . .  C ADDR   00A0H   A   
TEMTRANS . . . . .  C ADDR   00E6H   A   
TURNOFF. . . . . .  C ADDR   00B4H   A   
TURNON . . . . . .  C ADDR   00A9H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
